
<!DOCTYPE html>
<meta charset="utf-8">
<head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/latest/jquery.mobile.min.css" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/mobile/latest/jquery.mobile.min.js"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v0.min.js"></script>

<script type="text/javascript" src="jquery.sparkline.js"></script>
	<link href="http://omnipotent.net/jquery.sparkline/contrib/jquery.ui-1.6rc5/themes/spark/ui.core.css" rel="stylesheet"></link>
	<link href="http://omnipotent.net/jquery.sparkline/contrib/jquery.ui-1.6rc5/themes/spark/ui.theme.css" rel="stylesheet"></link>
	<link href="http://omnipotent.net/jquery.sparkline/contrib/jquery.ui-1.6rc5/themes/spark/ui.tabs.css" rel="stylesheet"></link>
	<link href="http://omnipotent.net/jquery.sparkline/contrib/google-code-prettify/prettify.css" rel="stylesheet"></link>
	<link href="http://omnipotent.net/jquery.sparkline/contrib/jpicker-1.1.6/css/jPicker-1.1.6.min.css" rel="stylesheet" type="text/css"></link>
	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="css/style.css">


<style>
<!-- FOR PANEL -->
	html, body { padding: 0; margin: 0; }
	html, .ui-mobile, .ui-mobile body {
    	height: 435px;
	}
	.ui-mobile, .ui-mobile .ui-page {
    	min-height: 435px;
	}
	.ui-content{
		padding:10px 15px 0px 15px;
	}
	.panel-content { padding:15px; }


path {
  stroke: rgb(58, 23, 23);
  stroke-width: 1px;
  fill: grey;
}
.background {
  fill: none;
  pointer-events: all;
}
svg{
border: solid 2px #ccc;
align:center;
margin-left: 20px;
margin-top: 40px;
}
</style>
</head>
<body>

<!-- defaultpanel  -->
		<div data-role="panel" id="defaultpanel" data-theme="b" data-display="overlay" data-position="right">
				
			<div id="id2" class="panel-content">
				
				
			</div><!-- /content wrapper for padding -->
            				
		</div><!-- /defaultpanel -->



<script>


	function panelinfo(info){
	$("#id2").empty();
	$("#id2").append("<h3><u>Network Status</u></h3>");
	$("#id2").append("<h4>"+info.country+"</h4>");
	//$("#id2").append("<a href=\"\" data-rel=\"close\" data-role=\"button\" data-theme=\"c\" data-icon=\"delete\" data-inline=\"true\">Close panel</a>");
		console.log(info.country);
	}
	
</script>
<script>
var width = 1160,
    height = 700;

var projection = d3.geo.mercator()
    .center([-10, 40 ])
    .scale(200)
    .rotate([0,0]);



var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
	.attr("class","svg");

	svg.append("rect")
    .attr("class", "background")
    .attr("width", width)
    .attr("height", height);

var path = d3.geo.path()
    .projection(projection),margin=100;

var g = svg.append("g");

// load and display the World
d3.json("world-110m2.json", function(error, topology) {
    g.selectAll("path")
      .data(topojson.object(topology, topology.objects.countries)
          .geometries)
    .enter()
      .append("path")
      .attr("d", path);


	   d3.csv("cities.csv", function(error, data) {
      console.log(data);
        dot = g.selectAll("circle")
           .data(data)
           .enter()
           .append("circle")
           .attr("cx", function(d) {
                   return projection([d.lon, d.lat])[0];
           })
           .attr("cy", function(d) {
                   return projection([d.lon, d.lat])[1];
           })
           .attr("r", 10)
           .style("fill", function(d){return d.color;});
		   
		   
		   
		   dot.on("click",function(d){
		   panelinfo(d);
		   
		   $( "#defaultpanel" ).panel( "open",d);
		   
		   
			console.log('d is ',d);
		   })
		   .append("svg:title")
		   .text(function(d){return d.city+", "+d.country});
	});   
});
 
	  

var zoom = d3.behavior.zoom()
    .on("zoom",function() {
        g.attr("transform","translate("+ 
            d3.event.translate.join(",")+")scale("+d3.event.scale+")");
        g.selectAll("path")  
            .attr("d", path.projection(projection)); 
});

svg.call(zoom);

</script>
<!-- later design-->
<!---------------------------------------------------------------------->
<!--
	  <section class="analytics">
    <h4 class="analytics-title">Network Overview</h4>
    <div class="analytics-chart">
      <div class="analytics-colchart">
        <div class="analytics-colgroup">
          <div class="analytics-col"><div class="analytics-bar" style="height: 70%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 30%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 50%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 90%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 80%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 70%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 30%;"></div></div>
        </div>
        <div class="analytics-colgroup">
          <div class="analytics-col"><div class="analytics-bar" style="height: 40%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 30%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 20%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 15%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 10%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 25%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 50%;"></div></div>
        </div>
        <div class="analytics-colgroup">
          <div class="analytics-col"><div class="analytics-bar" style="height: 60%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 35%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 50%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 55%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 80%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 82%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 35%;"></div></div>
        </div>
        <div class="analytics-colgroup">
          <div class="analytics-col"><div class="analytics-bar" style="height: 20%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 30%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 50%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 90%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 80%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 70%;"></div></div>
          <div class="analytics-col"><div class="analytics-bar" style="height: 35%;"></div></div>
        </div>
      </div>
      <div class="analytics-legend">
        <p>Crises</p>
        <p>Performance<</p>
        <p>Routine</p>
        <p>Non-Routine</p>
      </div>
    </div>
    <div class="analytics-metrics">
      <p class="analytics-count">984</p>
      <p class="analytics-metric">Health rate <span>81%</span></p>
      <p class="analytics-metric">Performance <span>92%</span></p>
    </div>
  </section>
-->
	<!---------------------------------------------------------------------->

</body>
</html>